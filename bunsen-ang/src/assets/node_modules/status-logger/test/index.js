// var util = require('util')
var test = require('tape')
var spawn = require('tape-spawn')
var logger = require('..')

test('spawn ls', function (t) {
  var st = spawn(t, 'ls ' + __dirname)
  st.stdout.match(function (output) {

  })
  st.end()
})

test('prints message', function (t) {
  var output = ''
  var outputLines = ['hello world']
  var log = logger(outputLines, { stream: through(write, end) })

  log.print()
  t.same(output, 'hello world', 'output is hello world')

  outputLines.push('I am a line')
  log.print()
  t.ok()

  function write (chunk, enc, cb) {
    output += chunk.toString()
    cb(null, chunk)
    console.log('here', output)
  }
  function end (cb) {
    console.log('end', output)
    t.ok(output)
    t.end()
    cb()
  }
})
